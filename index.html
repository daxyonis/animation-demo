<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo Animation Tirage</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/gsap.min.js"></script>
    <link rel="stylesheet" href="./main.css" />
  </head>
  <body>
    <div class="container">
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">AAA</text>
      </svg>
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">BBB</text>
      </svg>
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">CCC</text>
      </svg>
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">DDD</text>
      </svg>
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">EEE</text>
      </svg>
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">FFF</text>
      </svg>
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">GGG</text>
      </svg>
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">HHH</text>
      </svg>
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">III</text>
      </svg>
      <svg class="name">
        <rect y="5" width="300" height="70" class="green"></rect>
        <text x="100" y="50" style="fill: #fff; font-size: 48px">JJJ</text>
      </svg>
      -->
    </div>

    <script>
      const MIN_Y = 60.0;
      let t1 = gsap.timeline();

      document.querySelectorAll('.name').forEach((element) => {
        let yPos = element.getBoundingClientRect().top;
        t1.fromTo(
          element,
          {
            y: 500,
            ease: 'none',
            duration: 5,
          },
          {
            y: -500,
            ease: 'none',
            duration: 5,
            onUpdate: updateHandler,
          },
          0
        );
      });

      function updateHandler() {
        let topElement = this._targets.find(
          (element) => element.getBoundingClientRect().top < MIN_Y
        );
        if (topElement) {
          gsap.killTweensOf(topElement);
          // start to make it disappear
          console.log('Fade into darkness, you !');
          gsap.timeline().to(topElement, { opacity: 0, duration: 0.1 });
          // .to(topElement, {
          //   y: 500,
          //   ease: 'none',
          //   duration: 0.1,
          // })
          // .to(topElement, { opacity: 1, duration: 0.1 })
          // .to(topElement, {
          //   y: -500,
          //   ease: 'none',
          //   duration: 3,
          //   onUpdate: updateHandler,
          // });
        }
      }
    </script>
  </body>
</html>
